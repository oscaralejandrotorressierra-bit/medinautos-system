{% extends "base.html" %}

{# ------------------------------------------------------
TÍTULO DE LA PESTAÑA
------------------------------------------------------ #}
{% block title %}Editar Vehículo | MedinAutos{% endblock %}

{# ------------------------------------------------------
CSS DEL MÓDULO
------------------------------------------------------ #}
{% block extra_css %}
<link rel="stylesheet" href="/static/css/vehiculos.css">
{% endblock %}

{% block content %}

<!-- ==================================================
     CABECERA
================================================== -->
<div class="vehiculos-header">
    <h1>Editar vehículo</h1>
    <p class="subtitle">
        Modifica la información del vehículo registrado
    </p>
</div>

<!-- ==================================================
     TARJETA CONTENEDORA
================================================== -->
<div class="vehiculos-card">

    <!-- FORMULARIO -->
    <form method="post" class="vehiculos-form">

        <!-- =========================
             CLIENTE
        ========================== -->
        <div class="form-group">
            <label>
                <i class="fa-solid fa-user"></i> Cliente *
            </label>

            <div class="select-wrapper">
                <select name="cliente_id" required>

                    {% for cliente in clientes %}
                    <option value="{{ cliente.id }}" {% if cliente.id==vehiculo.cliente_id %}selected{% endif %}>
                        {{ cliente.nombre }} — {{ cliente.documento }}
                    </option>
                    {% endfor %}

                </select>

                <span class="select-icon">
                    <i class="fa-solid fa-chevron-down"></i>
                </span>
            </div>
        </div>

        <!-- =========================
             PLACA
        ========================== -->
        <div class="form-group">
            <label>
                <i class="fa-solid fa-car"></i> Placa *
            </label>
            <input type="text" name="placa" value="{{ vehiculo.placa }}" required style="text-transform: uppercase;">
        </div>

        <!-- =========================
             MARCA
        ========================== -->
        <div class="form-group">
            <label>
                <i class="fa-solid fa-industry"></i> Marca *
            </label>
            <input type="text" name="marca" value="{{ vehiculo.marca }}" required>
        </div>

        <!-- =========================
             MODELO
        ========================== -->
        <div class="form-group">
            <label>
                <i class="fa-solid fa-tag"></i> Modelo *
            </label>
            <input type="text" name="modelo" value="{{ vehiculo.modelo }}" required>
        </div>

        <!-- =========================
             AÑO
        ========================== -->
        <div class="form-group">
            <label>
                <i class="fa-solid fa-calendar"></i> Año
            </label>
            <input type="number" name="anio" value="{{ vehiculo.anio }}">
        </div>

        <!-- =========================
             COLOR
        ========================== -->
        <div class="form-group">
            <label>
                <i class="fa-solid fa-palette"></i> Color
            </label>
            <input type="text" name="color" value="{{ vehiculo.color }}">
        </div>

        <!-- =========================
             ACCIONES
        ========================== -->
        <div class="form-actions">
            <a href="/vehiculos" class="btn-secondary">
                <i class="fa-solid fa-arrow-left"></i> Cancelar
            </a>

            <button type="submit" class="btn-primary">
                <i class="fa-solid fa-floppy-disk"></i>
                Guardar cambios
            </button>
        </div>

    </form>

</div>

{% endblock %}

{# ------------------------------------------------------
SWEETALERT DE ÉXITO (EDITAR)
------------------------------------------------------ #}
{% block extra_js %}

<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<script>
    /* ==========================================
       ALERTA DE ÉXITO AL EDITAR VEHÍCULO
    ========================================== */

    const params = new URLSearchParams(window.location.search);

    if (params.has("updated")) {
        Swal.fire({
            icon: "success",
            title: "Vehículo actualizado",
            text: "Los cambios se guardaron correctamente",
            confirmButtonColor: "#d81822"
        });
    }
</script>

{% endblock %}